% to be proofreaded
\subsection{\IFRU{Инструкции}{Instructions}}

% TODO: instructions marked as (A) are not usually generated by compiler
% TODO: collect statistics using yttrium!
% TODO ? обратные инструкции

\subsubsection{\IFRU{Префиксы}{Prefixes}}

\begin{description}
\item[LOCK] \IFRU{используется чтобы предоставить эксклюзивный доступ к памяти в многопроцессорной среде}
{force CPU to make exclusive access to the RAM in multiprocessor environment}.
\IFRU{Для упрощения, можно сказать, что когда исполняется инструкция с этим префиксом, остальные процессоры
в системе останавливаются}{For the sake of simplification, it can be said that when instruction
with this prefix is executed, all other CPUs in multiprocessor system is stopped}.
\IFRU{Чаще все это используется для критических секций, семафоров, мьютексов}{Most often
it is used for critical sections, semaphores, mutexes}.
\IFRU{Обычно используется с}{Commonly used with} ADD, AND, BTR, BTS, CMPXCHG, OR, XADD, XOR.
\IFRU{Читайте больше о критических секциях}{Read more about critical sections} (\ref{critical_sections}).

\item[REP] \IFRU{используется с инструкциями}{used with} MOVSx \AndENRU STOSx\IFRU{ instructions}{}:
\IFRU{инструкция будет исполняться в цикле, счетчик расположен в регистре CX/ECX/RCX}
{execute the instruction in loop, counter is located in the CX/ECX/RCX register}.
\IFRU{Для более детального описания, читайте больше об инструкциях}
{For detailed description, read more about} MOVSx (\ref{REP_MOVSx}) 
\AndENRU STOSx (\ref{REP_STOSx})\IFRU{}{ instructions}.

\IFRU{Работа инструкций с префиксом REP зависит от флага DF, он задает направление}
{Instructions prefixed by REP are sensitive to DF flag, which is used to set direction}.

\item[REPE/REPNE] (\ac{AKA} REPZ/REPNZ) \IFRU{используется с инструкциями}{used with} CMPSx \AndENRU
SCASx\IFRU{ instructions}{}:
\IFRU{инструкция будет исполняться в цикле, счетчик расположен в регистре CX/ECX/RCX}
{execute the last instruction in loop, count is set in the CX/ECX/RCX register}. 
\IFRU{Выполнение будет прервано если ZF будет 0 (REPE) либо если ZF будет 1 (REPNE)}
{It will terminate prematurely if ZF is 0 (REPE) or if ZF is 1 (REPNE)}.

\IFRU{Для более детального описания, читайте больше об инструкциях}
{For detailed description, read more about} CMPSx (\ref{REPE_CMPSx}) 
\AndENRU SCASx (\ref{REPNE_SCASx})\IFRU{}{ instructions}.

\IFRU{Работа инструкций с префиксами REPE/REPNE зависит от флага DF, он задает направление}
{Instructions prefixed by REPE/REPNE are sensitive to DF flag, which is used to set direction}.

\end{description}

\subsubsection{\IFRU{Наиболее часто используемые инструкции}{Most frequently used instructions}}

\begin{description}
% in order to keep them easily sorted...
\input{appendix/x86/instructions/ADC}
\input{appendix/x86/instructions/ADD}
\input{appendix/x86/instructions/AND}
\input{appendix/x86/instructions/CALL}
\input{appendix/x86/instructions/CMP}
\input{appendix/x86/instructions/DEC}
\input{appendix/x86/instructions/IMUL}
\input{appendix/x86/instructions/INC}
\input{appendix/x86/instructions/JAE}
\input{appendix/x86/instructions/JA}
\input{appendix/x86/instructions/JBE}
\input{appendix/x86/instructions/JB}
\input{appendix/x86/instructions/JC}
\input{appendix/x86/instructions/JE}
\input{appendix/x86/instructions/JGE}
\input{appendix/x86/instructions/JG}
\input{appendix/x86/instructions/JLE}
\input{appendix/x86/instructions/JL}
\input{appendix/x86/instructions/JMP}
\input{appendix/x86/instructions/JNB}
\input{appendix/x86/instructions/JNC}
\input{appendix/x86/instructions/JNE}
\input{appendix/x86/instructions/JP}
\input{appendix/x86/instructions/MOVSB_W_D_Q}
\input{appendix/x86/instructions/MOVSX}
\input{appendix/x86/instructions/MOVZX}
\input{appendix/x86/instructions/MOV}
\input{appendix/x86/instructions/MUL}
\input{appendix/x86/instructions/NOP}
\input{appendix/x86/instructions/NOT}
\input{appendix/x86/instructions/OR}
\input{appendix/x86/instructions/POP}
\input{appendix/x86/instructions/PUSH}
\input{appendix/x86/instructions/RET}
\input{appendix/x86/instructions/SAHF}
\input{appendix/x86/instructions/SBB}
\input{appendix/x86/instructions/SCASB_W_D_Q}
\input{appendix/x86/instructions/SHL}
\input{appendix/x86/instructions/SHR}
\input{appendix/x86/instructions/STOSB_W_D_Q}
\input{appendix/x86/instructions/SUB}
\input{appendix/x86/instructions/XCHG}
\input{appendix/x86/instructions/XOR}
\end{description}

\subsubsection{\IFRU{Реже используемые инструкции}{Less frequently used instructions}}

\begin{description}
% BSR
% BT
% BTC
% BTR
% BTS
% CDQ
% CWDE
\input{appendix/x86/instructions/CMPSB_W_D_Q}
\input{appendix/x86/instructions/BSF}
\input{appendix/x86/instructions/CLD}
\input{appendix/x86/instructions/CLI}
\input{appendix/x86/instructions/CMC}
\input{appendix/x86/instructions/CMOV}
\input{appendix/x86/instructions/INT}
\input{appendix/x86/instructions/IRET}
\input{appendix/x86/instructions/SAL}
\input{appendix/x86/instructions/STC}
\input{appendix/x86/instructions/STD}
\input{appendix/x86/instructions/STI}
\input{appendix/x86/instructions/SYSCALL}
\input{appendix/x86/instructions/SYSENTER}
\input{appendix/x86/instructions/CPUID}
% SYSRET?
  %\item[CMPSB/CMPSW/CMPSD/CMPSQ]
  %\item[ENTER]
  %\item[IN]
  %\item[LEAVE]
  %\item[LES]
  % LDS
  %\item[LOOP]
  % NEG
  %\item[OUT]
  %\item[RCL]
  %\item[RCR]
  %\item[ROL]
  %\item[ROR]
  %\item[SAR]
  %\item[SETcc]
  %\item[STOSx]
  % CBW
  % CWD
  % IDIV
  % JCXZ, JECXZ
  % LAHF
  % PUSHF
  % POPF
  % RETF
  % SCASx
  % XLAT
  % PUSHA
  % POPA
  % LODSx
  % SHLD
  % SHRD
  % BSWAP
  % CMPXCHG
  % XADD
  % CMPXCHG8B
  % RDTSC
  % UD2


\end{description}

\iffalse
% TODO
\subsubsection{\IFRU{Инструкции FPU}{FPU instructions}}

\begin{description}
  \item[FADDP]
  \item[FCOM]
  \item[FCOMP]
  \item[FDIV]
  \item[FDIVP]
  \item[FDIVR]
  \item[FLD]
  \item[FMUL]
  \item[FNSTSW]
  \item[FSTP]
  \item[FUCOM]
  \item[FUCOMPP]
\end{description}

\subsubsection{\IFRU{SIMD-инструкции}{SIMD instructions}}

\begin{description}
  \item[DIVSD]
  \item[MOVDQA]
  \item[MOVDQU]
  \item[PADDD]
  \item[PCMPEQB]
  \item[PLMULHW]
  \item[PLMULLD]
  \item[PMOVMSKB]
  \item[PXOR]
\end{description}
\fi

