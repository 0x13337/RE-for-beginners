\section{\RU{Проверка результата scanf()}\EN{scanf() result checking}}

\RU {Как я уже упоминал, использовать \scanf в наше время это слегка старомодно. 
Но если уж жизнь заставила этим заниматься, нужно хотя бы проверять, сработал ли \scanf 
правильно или пользователь ввел вместо числа что-то другое, что \scanf не смог трактовать как число.}
\EN{As I noted before, it is slightly old-fashioned to use \scanf today. 
But if we have to, we need to at least check if \scanf finishes correctly without error.}

\lstinputlisting{patterns/04_scanf/3_checking_retval/ex3.c}

\RU{По стандарту}\EN{By standard, the} 
\scanf\footnote{scanf, wscanf: \href{http://go.yurichev.com/17255}{MSDN}} 
\RU{возвращает количество успешно полученных значений.}
\EN{function returns the number of fields it has successfully read.}

\RU{В нашем случае, если все успешно и пользователь ввел таки некое число, \scanf вернет 1. 
А если нет, то 0 (или EOF).} 
\EN{In our case, if everything goes fine and the user enters a number 
\scanf will return 1, or in case of error (or EOF) - 0.}

\RU{Я добавил код проверяющий результат \scanf и в случае ошибки, он сообщает пользователю что-то другое.}
\EN{I have added some C code for \scanf result checking and printing error message in case of error.}

\RU{Это работает предсказуемо}\EN{This works predictably}:

\begin{lstlisting}
C:\...>ex3.exe
Enter X:
123
You entered 123...

C:\...>ex3.exe
Enter X:
ouch
What you entered? Huh?
\end{lstlisting}

% subsections
\input{patterns/04_scanf/3_checking_retval/x86}
\input{patterns/04_scanf/3_checking_retval/x64}
\ifdefined\IncludeARM
\input{patterns/04_scanf/3_checking_retval/ARM}
\fi
\ifdefined\IncludeMIPS
\input{patterns/04_scanf/3_checking_retval/MIPS}
\fi

\subsection{\Exercise}

\index{x86!\Instructions!Jcc}
\index{ARM!\Instructions!Bcc}
\EN{As we can see, the JNE/JNZ instruction can be easily replaced by the JE/JZ and otherwise 
(or BNE by BEQ and otherwise).}
\RU{Как мы можем увидеть, инструкцию JNE/JNZ можно вполне заменить на JE/JZ или наоборот 
(или BNE на BEQ и наоборот).}
\EN{But they the basic blocks also must be swapped.}\RU{Но при этом еще нужно переставить базовые блоки местами.}
\EN{Try to do it on some of the examples.}\RU{Попробуйте сделать это в каком-нибудь примере.}
