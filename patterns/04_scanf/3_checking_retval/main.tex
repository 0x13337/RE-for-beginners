\section{\RU{Проверка результата scanf()}\EN{scanf() result checking}}

\RU {Как я уже упоминал, использовать \scanf в наше время это слегка старомодно. 
Но если уж жизнь заставила этим заниматься, нужно хотя бы проверять, сработал ли \scanf 
правильно или пользователь ввел вместо числа что-то другое, что \scanf не смог трактовать как число.}
\EN{As I noticed before, it is slightly old-fashioned to use \scanf today. 
But if we have to, we need at least check if \scanf finished correctly without error.}

\lstinputlisting{patterns/04_scanf/3_checking_retval/ex3.c}

\RU{По стандарту}\EN{By standard}, 
\scanf\footnote{MSDN: scanf, wscanf: \url{http://msdn.microsoft.com/en-us/library/9y6s16x1(VS.71).aspx}} 
\RU{возвращает количество успешно полученных значений.}
\EN{function returns number of fields it successfully read.}

\RU{В нашем случае, если все успешно и пользователь ввел таки некое число, \scanf вернет 1. 
А если нет, то 0 (или EOF).} 
\EN{In our case, if everything went fine and user entered a number, 
\scanf will return 1 or 0 (or EOF) in case of error.}

\RU{Я добавил код проверяющий результат \scanf и в случае ошибки, он сообщает пользователю что-то другое.}
\EN{I added C code for \scanf result checking and printing error message in case of error.}

\RU{Это работает предсказуемо}\EN{This works predictably}:

\begin{lstlisting}
C:\...>ex3.exe
Enter X:
123
You entered 123...

C:\...>ex3.exe
Enter X:
ouch
What you entered? Huh?
\end{lstlisting}

\input{patterns/04_scanf/3_checking_retval/x86}
\input{patterns/04_scanf/3_checking_retval/x64}
\ifdefined\IncludeARM
\input{patterns/04_scanf/3_checking_retval/ARM}
\fi
