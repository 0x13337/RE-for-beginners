\chapter{\RU{Условные переходы}\EN{Conditional jumps}}
\label{sec:Jcc}
\index{\CLanguageElements!if}

% sections
\input{patterns/07_jcc/simple/main}
\input{patterns/07_jcc/abs/main}
\input{patterns/07_jcc/cond_operator/main}

\section{\Conclusion{}}

\subsection{x86}

\RU{Примерный скелет условных переходов}\EN{Rough skeleton of conditional jump}:

% FIXME: russian translation
\begin{lstlisting}[caption=x86]
CMP register, register/value
Jcc true ; cc=condition code
false:
... some code to be executed if comparison result is false ...
JMP exit 
true:
... some code to be executed if comparison result is true ...
exit:
\end{lstlisting}

\ifdefined\IncludeARM
\begin{lstlisting}[caption=ARM]
CMP register, register/value
Bcc true ; cc=condition code
false:
... some code to be executed if comparison result is false ...
JMP exit 
true:
... some code to be executed if comparison result is true ...
exit:
\end{lstlisting}
\fi

\ifdefined\IncludeARM
\subsection{ARM}

\RU{В режиме ARM, Можно использовать условные суффиксы для некоторых инструкций:}
\EN{It's possible to use conditional suffixes in ARM mode for some instructions:}

\begin{lstlisting}[caption=ARM (\ARMMode)]
CMP register, register/value
instr1_cc ; some instruction will be executed if condition code is true
instr2_cc ; some other instruction will be executed if other condition code is true
... etc ...
\end{lstlisting}

\RU{Конечно, нет никаких ограничений на количество инструкций с условными суффиксами, до тех пор
пока флаги CPU не были модифицированы одной из таких инструкций.}
\EN{Of course, there are no limit of number of instructions with conditional code suffixes, 
as long as CPU flags are not modified by any of them.}
% FIXME: list of such instructions or \ref{} to it

\index{ARM!\Instructions!IT}
\RU{В режиме Thumb есть инструкция IT, позволяющая дополнить следующие 4 инструкции суффиксами, задающими
условие.}
\EN{Thumb mode has IT instruction, allowing to add conditional suffixes to the next four instructions.}
\RU{Читайте больше об этом}\EN{Read more about it}: \ref{ARM_Thumb_IT}.

\begin{lstlisting}[caption=ARM (\ThumbMode)]
CMP register, register/value
ITEEE EQ ; set these suffixes: if-then-else-else-else
instr1   ; instruction will be executed if condition is true
instr2   ; instruction will be executed if condition is false
instr3   ; instruction will be executed if condition is false
instr4   ; instruction will be executed if condition is false
\end{lstlisting}
\fi
